[program:{{ app_name }}]
command={{ app_dir }}/venv/bin/gunicorn -w 4 -b 127.0.0.1:{{ app_port }} --chdir {{ app_dir }}/src app:app
directory={{ app_dir }}/src
user={{ app_user }}
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/supervisor/{{ app_name }}.log
stderr_logfile=/var/log/supervisor/{{ app_name }}_error.log
environment=PATH="{{ app_dir }}/venv/bin:%(ENV_PATH)s",
            FLASK_APP="app.py",
            FLASK_ENV="production",
            DATABASE_URL="postgresql://{{ db_user | default('linkedclaims') }}:{{ db_password }}@localhost/{{ db_name | default('linkedclaims_extraction') }}",
            REDIS_HOST="{{ redis_host | default('localhost') }}",
            REDIS_PORT="{{ redis_port | default('6379') }}"